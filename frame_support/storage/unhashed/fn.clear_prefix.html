<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Partially clear the storage of all keys under a common `prefix`."><title>clear_prefix in frame_support::storage::unhashed - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-b25d77b18a16a9a4.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="frame_support" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0-nightly (13a52890d 2024-08-14)" data-channel="nightly" data-search-js="search-ef54e092fea9c776.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-cb0df477c2d67d00.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../frame_support/index.html">frame_<wbr>support</a><span class="version">28.0.0</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In frame_<wbr>support::<wbr>storage::<wbr>unhashed</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../../index.html">frame_support</a>::<wbr><a href="../index.html">storage</a>::<wbr><a href="index.html">unhashed</a>::<wbr><a class="fn" href="#">clear_prefix</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../src/frame_support/storage/unhashed.rs.html#140-155">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn clear_prefix(
    prefix: &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>],
    maybe_limit: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>&gt;,
    _maybe_cursor: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]&gt;,
) -&gt; <a class="struct" href="../child/struct.MultiRemovalResults.html" title="struct frame_support::storage::child::MultiRemovalResults">MultiRemovalResults</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Partially clear the storage of all keys under a common <code>prefix</code>.</p>
<h2 id="limit"><a class="doc-anchor" href="#limit">§</a>Limit</h2>
<p>A <em>limit</em> should always be provided through <code>maybe_limit</code>. This is one fewer than the
maximum number of backend iterations which may be done by this operation and as such
represents the maximum number of backend deletions which may happen. A <em>limit</em> of zero
implies that no keys will be deleted, though there may be a single iteration done.</p>
<p>The limit can be used to partially delete storage items in case it is too large or costly
to delete all in a single operation.</p>
<h2 id="cursor"><a class="doc-anchor" href="#cursor">§</a>Cursor</h2>
<p>A <em>cursor</em> may be passed in to this operation with <code>maybe_cursor</code>. <code>None</code> should only be
passed once (in the initial call) for any attempt to clear storage. In general, subsequent calls
operating on the same prefix should pass <code>Some</code> and this value should be equal to the
previous call result’s <code>maybe_cursor</code> field. The only exception to this is when you can
guarantee that the subsequent call is in a new block; in this case the previous call’s result
cursor need not be passed in an a <code>None</code> may be passed instead. This exception may be useful
then making this call solely from a block-hook such as <code>on_initialize</code>.</p>
<p>Returns <a href="../child/struct.MultiRemovalResults.html" title="struct frame_support::storage::child::MultiRemovalResults"><code>MultiRemovalResults</code></a> to inform about the result. Once the
resultant <code>maybe_cursor</code> field is <code>None</code>, then no further items remain to be deleted.</p>
<p>NOTE: After the initial call for any given child storage, it is important that no keys further
keys are inserted. If so, then they may or may not be deleted by subsequent calls.</p>
<h2 id="note"><a class="doc-anchor" href="#note">§</a>Note</h2>
<p>Please note that keys which are residing in the overlay for the child are deleted without
counting towards the <code>limit</code>.</p>
</div></details></section></div></main></body></html>