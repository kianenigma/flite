<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Merkle Mountain Range"><title>pallet_mmr - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-405f8b29f52305f8.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pallet_mmr" data-themes="" data-resource-suffix="" data-rustdoc-version="1.83.0-nightly (28e8f01c2 2024-09-17)" data-channel="nightly" data-search-js="search-0cfde64e8ad3a7fe.js" data-settings-js="settings-7e3bb6c46e92e77c.js" ><script src="../static.files/storage-29b1d5a9048d38fe.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-14659ec02b58af51.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-40f72c9259523cb3.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../pallet_mmr/index.html">pallet_<wbr>mmr</a><span class="version">27.0.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#merkle-mountain-range" title="Merkle Mountain Range">Merkle Mountain Range</a><ul><li><a href="#overview" title="Overview">Overview</a></li><li><a href="#what-for" title="What for?">What for?</a></li></ul></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">pallet_mmr</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/pallet_mmr/lib.rs.html#18-466">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="merkle-mountain-range"><a class="doc-anchor" href="#merkle-mountain-range">§</a>Merkle Mountain Range</h2><h3 id="overview"><a class="doc-anchor" href="#overview">§</a>Overview</h3>
<p>Details on Merkle Mountain Ranges (MMRs) can be found here:
<a href="https://github.com/mimblewimble/grin/blob/master/doc/mmr.md">https://github.com/mimblewimble/grin/blob/master/doc/mmr.md</a></p>
<p>The MMR pallet constructs an MMR from leaf data obtained on every block from
<code>LeafDataProvider</code>. MMR nodes are stored both in:</p>
<ul>
<li>on-chain storage - hashes only; not full leaf content;</li>
<li>off-chain storage - via Indexing API we push full leaf content (and all internal nodes as
well) to the Off-chain DB, so that the data is available for Off-chain workers.
Hashing used for MMR is configurable independently from the rest of the runtime (i.e. not using
<code>frame_system::Hashing</code>) so something compatible with external chains can be used (like
Keccak256 for Ethereum compatibility).</li>
</ul>
<p>Depending on the usage context (off-chain vs on-chain) the pallet is able to:</p>
<ul>
<li>verify MMR leaf proofs (on-chain)</li>
<li>generate leaf proofs (off-chain)</li>
</ul>
<p>See <a href="../sp_mmr_primitives/struct.Compact.html" title="struct sp_mmr_primitives::Compact">primitives::Compact</a> documentation for how you can optimize proof size for leafs that are
composed from multiple elements.</p>
<h3 id="what-for"><a class="doc-anchor" href="#what-for">§</a>What for?</h3>
<p>Primary use case for this pallet is to generate MMR root hashes, that can latter on be used by
BEEFY protocol (see <a href="https://github.com/paritytech/grandpa-bridge-gadget">https://github.com/paritytech/grandpa-bridge-gadget</a>).
MMR root hashes along with BEEFY will make it possible to build Super Light Clients (SLC) of
Substrate-based chains. The SLC will be able to follow finality and can be shown proofs of more
details that happened on the source chain.
In that case the chain which contains the pallet generates the Root Hashes and Proofs, which
are then presented to another chain acting as a light client which can verify them.</p>
<p>Secondary use case is to archive historical data, but still be able to retrieve them on-demand
if needed. For instance if parent block hashes are stored in the MMR it’s possible at any point
in time to provide an MMR proof about some past block hash, while this data can be safely pruned
from on-chain storage.</p>
<p>NOTE This pallet is experimental and not proven to work in production.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.primitives"><code>pub use <a class="mod" href="../sp_mmr_primitives/index.html" title="mod sp_mmr_primitives">sp_mmr_primitives</a> as primitives;</code></div></li><li><div class="item-name"><code>pub use <a class="mod" href="pallet/index.html" title="mod pallet_mmr::pallet">pallet</a>::*;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="pallet/index.html" title="mod pallet_mmr::pallet">pallet</a></div><div class="desc docblock-short">The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.DefaultBlockHashProvider.html" title="struct pallet_mmr::DefaultBlockHashProvider">Default<wbr>Block<wbr>Hash<wbr>Provider</a></div><div class="desc docblock-short">Default implementation of BlockHashProvider using frame_system.</div></li><li><div class="item-name"><a class="struct" href="struct.NodesUtils.html" title="struct pallet_mmr::NodesUtils">Nodes<wbr>Utils</a></div><div class="desc docblock-short">MMR nodes &amp; size -related utilities.</div></li><li><div class="item-name"><a class="struct" href="struct.ParentNumberAndHash.html" title="struct pallet_mmr::ParentNumberAndHash">Parent<wbr>Number<wbr>AndHash</a></div><div class="desc docblock-short">The most common use case for MMRs is to store historical block hashes,
so that any point in time in the future we can receive a proof about some past
blocks without using excessive on-chain storage.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum pallet_mmr::Error">Error</a></div><div class="desc docblock-short">Merkle Mountain Range operation error.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.BlockHashProvider.html" title="trait pallet_mmr::BlockHashProvider">Block<wbr>Hash<wbr>Provider</a></div><div class="desc docblock-short">Block hash provider for a given block number.</div></li><li><div class="item-name"><a class="trait" href="trait.LeafDataProvider.html" title="trait pallet_mmr::LeafDataProvider">Leaf<wbr>Data<wbr>Provider</a></div><div class="desc docblock-short">A provider of the MMR’s leaf data.</div></li><li><div class="item-name"><a class="trait" href="trait.WeightInfo.html" title="trait pallet_mmr::WeightInfo">Weight<wbr>Info</a></div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.verify_ancestry_proof.html" title="fn pallet_mmr::verify_ancestry_proof">verify_<wbr>ancestry_<wbr>proof</a></div><div class="desc docblock-short">Stateless ancestry proof verification.</div></li><li><div class="item-name"><a class="fn" href="fn.verify_leaves_proof.html" title="fn pallet_mmr::verify_leaves_proof">verify_<wbr>leaves_<wbr>proof</a></div><div class="desc docblock-short">Stateless MMR proof verification for batch of leaves.</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.LeafIndex.html" title="type pallet_mmr::LeafIndex">Leaf<wbr>Index</a></div><div class="desc docblock-short">A type to describe leaf position in the MMR.</div></li><li><div class="item-name"><a class="type" href="type.NodeIndex.html" title="type pallet_mmr::NodeIndex">Node<wbr>Index</a></div><div class="desc docblock-short">A type to describe node position in the MMR (node index).</div></li></ul></section></div></main></body></html>