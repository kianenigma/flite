<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Clear the storage of each key-value pair where the key starts with the given `prefix`."><title>clear_prefix in sp_io::storage - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-405f8b29f52305f8.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="sp_io" data-themes="" data-resource-suffix="" data-rustdoc-version="1.83.0-nightly (28e8f01c2 2024-09-17)" data-channel="nightly" data-search-js="search-0cfde64e8ad3a7fe.js" data-settings-js="settings-7e3bb6c46e92e77c.js" ><script src="../../static.files/storage-29b1d5a9048d38fe.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-14659ec02b58af51.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-40f72c9259523cb3.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../sp_io/index.html">sp_io</a><span class="version">30.0.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">clear_<wbr>prefix</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#limit" title="Limit">Limit</a></li><li><a href="#note" title="Note">Note</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In sp_<wbr>io::<wbr>storage</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">sp_io</a>::<wbr><a href="index.html">storage</a>::<wbr><a class="fn" href="#">clear_prefix</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/sp_io/lib.rs.html#225-253">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn clear_prefix(prefix: &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>], limit: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>&gt;) -&gt; <a class="enum" href="../enum.KillStorageResult.html" title="enum sp_io::KillStorageResult">KillStorageResult</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Clear the storage of each key-value pair where the key starts with the given <code>prefix</code>.</p>
<h2 id="limit"><a class="doc-anchor" href="#limit">§</a>Limit</h2>
<p>Deletes all keys from the overlay and up to <code>limit</code> keys from the backend if
it is set to <code>Some</code>. No limit is applied when <code>limit</code> is set to <code>None</code>.</p>
<p>The limit can be used to partially delete a prefix storage in case it is too large
to delete in one go (block).</p>
<p>Returns <a href="../enum.KillStorageResult.html" title="enum sp_io::KillStorageResult"><code>KillStorageResult</code></a> to inform about the result.</p>
<h2 id="note"><a class="doc-anchor" href="#note">§</a>Note</h2>
<p>Please note that keys that are residing in the overlay for that prefix when
issuing this call are all deleted without counting towards the <code>limit</code>. Only keys
written during the current block are part of the overlay. Deleting with a <code>limit</code>
mostly makes sense with an empty overlay for that prefix.</p>
<p>Calling this function multiple times per block for the same <code>prefix</code> does
not make much sense because it is not cumulative when called inside the same block.
The deletion would always start from <code>prefix</code> resulting in the same keys being deleted
every time this function is called with the exact same arguments per block. This happens
because the keys in the overlay are not taken into account when deleting keys in the
backend.</p>
</div></details></section></div></main></body></html>